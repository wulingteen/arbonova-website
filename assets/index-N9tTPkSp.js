(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class A{canvas;ctx;particles=[];mouse={x:0,y:0};constructor(e){this.canvas=document.getElementById(e),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.resize(),this.init(),this.animate(),window.addEventListener("resize",()=>{this.resize(),this.init()}),window.addEventListener("mousemove",t=>{this.mouse.x=t.clientX,this.mouse.y=t.clientY}))}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}init(){const e=Math.min(60,Math.floor(window.innerWidth*window.innerHeight/2e4));this.particles=[];for(let t=0;t<e;t++)this.particles.push(new O(this.canvas.width,this.canvas.height))}animate=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{e.update(this.canvas.width,this.canvas.height),e.draw(this.ctx)});for(let e=0;e<this.particles.length;e++)for(let t=e+1;t<this.particles.length;t++){const r=this.particles[e].x-this.particles[t].x,s=this.particles[e].y-this.particles[t].y,i=Math.sqrt(r*r+s*s);if(i<180){const h=(1-i/180)*.2;this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(26, 26, 26, ${h})`,this.ctx.lineWidth=1,this.ctx.moveTo(this.particles[e].x,this.particles[e].y),this.ctx.lineTo(this.particles[t].x,this.particles[t].y),this.ctx.stroke()}}this.particles.forEach(e=>{const t=e.x-this.mouse.x,r=e.y-this.mouse.y,s=Math.sqrt(t*t+r*r);if(s<250){const i=(1-s/250)*.4;this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(170, 113, 62, ${i})`,this.ctx.lineWidth=1.5,this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(this.mouse.x,this.mouse.y),this.ctx.stroke()}}),requestAnimationFrame(this.animate)}}class O{x;y;vx;vy;size;opacity;constructor(e,t){this.x=Math.random()*e,this.y=Math.random()*t,this.vx=(Math.random()-.5)*.2,this.vy=(Math.random()-.5)*.2,this.size=Math.random()*3+1,this.opacity=Math.random()*.6+.2}update(e,t){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>e)&&(this.vx*=-1),(this.y<0||this.y>t)&&(this.vy*=-1)}draw(e){e.beginPath(),e.fillStyle=`rgba(26, 26, 26, ${this.opacity})`,e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill()}}function C(){const n=new IntersectionObserver(e=>{e.forEach((t,r)=>{if(t.isIntersecting){const s=t.target,i=s.parentElement;if(i){const y=Array.from(i.querySelectorAll(".animate-on-scroll")).indexOf(s)*100;setTimeout(()=>{s.classList.add("visible")},y)}else s.classList.add("visible");n.unobserve(t.target)}})},{threshold:.1,rootMargin:"0px 0px -40px 0px"});document.querySelectorAll(".animate-on-scroll").forEach(e=>n.observe(e))}function k(){const n=document.getElementById("navbar"),e=document.getElementById("hamburger"),t=document.getElementById("navLinks");window.addEventListener("scroll",()=>{window.scrollY>50?n.classList.add("scrolled"):n.classList.remove("scrolled")}),e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("open"),document.body.style.overflow=t.classList.contains("open")?"hidden":""}),t.querySelectorAll(".nav-link").forEach(r=>{r.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("open"),document.body.style.overflow=""})})}function F(){const n=document.querySelectorAll(".stat-number[data-target]"),e=new IntersectionObserver(t=>{t.forEach(r=>{if(r.isIntersecting){const s=r.target,i=parseInt(s.dataset.target||"0",10);B(s,i),e.unobserve(s)}})},{threshold:.5});n.forEach(t=>e.observe(t))}function B(n,e){const r=performance.now();function s(i){const h=i-r,d=Math.min(h/2e3,1),y=1-Math.pow(1-d,3),f=Math.floor(y*e);n.textContent=f.toString(),d<1?requestAnimationFrame(s):n.textContent=e.toString()}requestAnimationFrame(s)}function H(){document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",e=>{e.preventDefault();const t=n.getAttribute("href"),r=document.querySelector(t);if(r){const i=r.getBoundingClientRect().top+window.scrollY-72;window.scrollTo({top:i,behavior:"smooth"})}})})}function W(){const n=document.getElementById("contactForm");n&&n.addEventListener("submit",e=>{e.preventDefault();const t=n.querySelector('button[type="submit"]'),r=t.innerHTML;t.innerHTML="<span>已送出 ✓</span>",t.style.opacity="0.7",t.disabled=!0,setTimeout(()=>{t.innerHTML=r,t.style.opacity="1",t.disabled=!1,n.reset()},3e3)})}function z(){const n=document.getElementById("splash-screen"),e=document.getElementById("splashCanvas");if(!n||!e)return;document.body.style.overflow="hidden";const t=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const r=e.width/2,s=e.height/2,i=["circle","diamond","triangle","hexagon","square"],h=["rgba(26,26,26,","rgba(50,101,58,","rgba(170,113,62,"],d=[],y=[];d.push({x:r,y:s,shape:"hexagon",radius:8,opacity:0,targetOpacity:.9,born:performance.now()});let f=0;const v=14,P=Math.hypot(r,s);function w(){if(f>=v)return;f++;const p=3+Math.floor(Math.random()*4),o=f/v*P*.97;for(let c=0;c<p;c++){const a=c/p*Math.PI*2+f*.37,m=(Math.random()-.5)*.5,l=o*(.75+Math.random()*.5),u=r+Math.cos(a+m)*l,b=s+Math.sin(a+m)*l,S={x:u,y:b,shape:i[Math.floor(Math.random()*i.length)],radius:3+Math.random()*5,opacity:0,targetOpacity:.5+Math.random()*.4,born:performance.now()};d.push(S),[...d.slice(0,-1)].sort((g,I)=>(g.x-u)**2+(g.y-b)**2-((I.x-u)**2+(I.y-b)**2)).slice(0,1+Math.floor(Math.random()*2)).forEach(g=>y.push({from:S,to:g,progress:0,born:performance.now(),color:h[Math.floor(Math.random()*h.length)]}))}f<v&&setTimeout(w,250)}setTimeout(w,120);function q(p){const{x:o,y:c,radius:a,shape:m}=p;if(t.beginPath(),m==="circle")t.arc(o,c,a,0,Math.PI*2);else if(m==="square")t.rect(o-a,c-a,a*2,a*2);else if(m==="diamond")t.moveTo(o,c-a*1.3),t.lineTo(o+a*1.3,c),t.lineTo(o,c+a*1.3),t.lineTo(o-a*1.3,c),t.closePath();else if(m==="triangle"){const l=a*1.7;t.moveTo(o,c-l),t.lineTo(o+l,c+l*.6),t.lineTo(o-l,c+l*.6),t.closePath()}else if(m==="hexagon"){for(let l=0;l<6;l++){const u=l/6*Math.PI*2-Math.PI/6;l===0?t.moveTo(o+Math.cos(u)*a,c+Math.sin(u)*a):t.lineTo(o+Math.cos(u)*a,c+Math.sin(u)*a)}t.closePath()}}let x,M=!1;function E(p){M||(t.clearRect(0,0,e.width,e.height),y.forEach(o=>{if(o.progress=Math.min(1,(p-o.born)/550),o.progress<=0)return;const c=o.from.x+(o.to.x-o.from.x)*o.progress,a=o.from.y+(o.to.y-o.from.y)*o.progress;t.beginPath(),t.strokeStyle=o.color+Math.min(.35,o.progress*.35)+")",t.lineWidth=.8,t.moveTo(o.from.x,o.from.y),t.lineTo(c,a),t.stroke()}),d.forEach(o=>{o.opacity=Math.min(o.targetOpacity,(p-o.born)/350*o.targetOpacity),t.fillStyle=`rgba(26,26,26,${o.opacity})`,q(o),t.fill()}),x=requestAnimationFrame(E))}x=requestAnimationFrame(E);const L=n.querySelector(".splash-text"),T=n.querySelector(".splash-wordmark");setTimeout(()=>{T&&(T.style.opacity="1"),L&&(L.style.opacity="1")},1800),setTimeout(()=>{M=!0,cancelAnimationFrame(x),n.classList.add("hidden"),document.body.style.overflow="",setTimeout(()=>n.remove(),900)},4800)}document.addEventListener("DOMContentLoaded",()=>{z(),new A("particleCanvas"),C(),k(),F(),H(),W()});
